// src/routes/breeding-discovery-listings.ts
// Breeding Discovery: Listing CRUD + lifecycle

import type { FastifyInstance, FastifyPluginAsync } from "fastify";
import prisma from "../prisma.js";
import { generateListingNumber } from "../utils/breeding-discovery-numbers.js";
import {
  breedingListingCreateSchema,
  breedingListingUpdateSchema,
  validateIntentFeeDirection,
} from "../validation/breeding-discovery.js";

function parseIntStrict(v: unknown): number | null {
  const n = Number(v);
  return Number.isInteger(n) && n > 0 ? n : null;
}

function parsePaging(q: Record<string, unknown>) {
  const page = Math.max(1, Number(q?.page ?? 1) || 1);
  const limit = Math.min(100, Math.max(1, Number(q?.limit ?? 25) || 25));
  const skip = (page - 1) * limit;
  return { page, limit, skip };
}
